## Capítulo III: Requirements Specification

### 3.2. User Stories

### Epics

| **Epic ID** | **Título** | **Descripción** |
|-------------|------------|-----------------|
| **EP01** | **Presencia Digital y Captación** | Como startup, necesitamos establecer una presencia digital sólida que comunique nuestra propuesta de valor IoT y atraiga tanto a conductores como propietarios de estacionamientos. |
| **EP02** | **Onboarding y Autenticación** | Como plataforma, necesitamos un sistema de registro y autenticación seguro que diferencie entre conductores y propietarios, facilitando un acceso rápido y protegido. |
| **EP03** | **Gestión de Perfiles** | Como usuarios (conductores y propietarios), necesitamos gestionar nuestros perfiles con información personalizada y relevante para cada tipo de usuario. |
| **EP04** | **Sistema de Reservas** | Como conductor, necesito encontrar, reservar y acceder a espacios de estacionamiento de manera rápida y confiable para optimizar mi tiempo de búsqueda. |
| **EP05** | **Gestión de Estacionamientos** | Como propietario, necesito registrar, configurar y administrar mis espacios de estacionamiento para maximizar ocupación e ingresos. |
| **EP06** | **Monetización por Comisiones** | Como plataforma, necesitamos generar ingresos sostenibles mediante un modelo de comisiones por transacción que agregue valor a propietarios y conductores. |
| **EP07** | **Sistema de Calificaciones** | Como usuarios de la plataforma, necesitamos un sistema de reputación que genere confianza y mejore la calidad del servicio mediante feedback bidireccional. |
| **EP08** | **Notificaciones en Tiempo Real** | Como usuario, necesito recibir alertas oportunas sobre el estado de mis reservas, disponibilidad y eventos relevantes para mantenerme informado. |
| **EP09** | **Backend API y Microservicios** | Como desarrollador, necesito una API robusta y escalable que soporte todas las operaciones de negocio con alta disponibilidad y rendimiento. |
| **EP10** | **Frontend Multiplataforma** | Como desarrollador, necesito interfaces de usuario intuitivas y responsivas tanto para aplicación móvil como web que brinden una excelente experiencia de usuario. |
| **EP11** | **Infraestructura IoT** | Como sistema, necesito gestionar dispositivos IoT distribuidos y edge servers para garantizar comunicación confiable y datos precisos en tiempo real. |
| **EP12** | **Procesamiento de Pagos** | Como plataforma, necesito procesar transacciones de forma segura, rápida y confiable cumpliendo con estándares de seguridad financiera. |

# User Stories y Epics - ParkeoYa

## Introducción

Este documento presenta el conjunto completo de Epics y User Stories que definen los requisitos funcionales de ParkeoYa, una plataforma IoT para gestión inteligente de estacionamientos. Las historias de usuario están organizadas por épicas y siguen la metodología ágil con criterios de aceptación en formato Gherkin (Given-When-Then).

Cada User Story incluye escenarios de camino feliz (Happy Path) y caminos alternativos (Unhappy Path) para garantizar una cobertura completa de casos de uso. Las Technical Stories cubren aspectos técnicos sin interacción directa del usuario final.

## Epics

| **Epic ID** | **Título** | **Descripción** |
|-------------|------------|-----------------|
| **EP01** | **Presencia Digital y Captación** | Como startup, necesitamos establecer una presencia digital sólida que comunique nuestra propuesta de valor IoT y atraiga tanto a conductores como propietarios de estacionamientos. |
| **EP02** | **Onboarding y Autenticación** | Como plataforma, necesitamos un sistema de registro y autenticación seguro que diferencie entre conductores y propietarios, facilitando un acceso rápido y protegido. |
| **EP03** | **Gestión de Perfiles** | Como usuarios (conductores y propietarios), necesitamos gestionar nuestros perfiles con información personalizada y relevante para cada tipo de usuario. |
| **EP04** | **Sistema de Reservas** | Como conductor, necesito encontrar, reservar y acceder a espacios de estacionamiento de manera rápida y confiable para optimizar mi tiempo de búsqueda. |
| **EP05** | **Gestión de Estacionamientos** | Como propietario, necesito registrar, configurar y administrar mis espacios de estacionamiento para maximizar ocupación e ingresos. |
| **EP06** | **Monetización por Comisiones** | Como plataforma, necesitamos generar ingresos sostenibles mediante un modelo de comisiones por transacción que agregue valor a propietarios y conductores. |
| **EP07** | **Sistema de Calificaciones** | Como usuarios de la plataforma, necesitamos un sistema de reputación que genere confianza y mejore la calidad del servicio mediante feedback bidireccional. |
| **EP08** | **Notificaciones en Tiempo Real** | Como usuario, necesito recibir alertas oportunas sobre el estado de mis reservas, disponibilidad y eventos relevantes para mantenerme informado. |
| **EP09** | **Backend API y Microservicios** | Como desarrollador, necesito una API robusta y escalable que soporte todas las operaciones de negocio con alta disponibilidad y rendimiento. |
| **EP10** | **Frontend Multiplataforma** | Como desarrollador, necesito interfaces de usuario intuitivas y responsivas tanto para aplicación móvil como web que brinden una excelente experiencia de usuario. |
| **EP11** | **Infraestructura IoT** | Como sistema, necesito gestionar dispositivos IoT distribuidos y edge servers para garantizar comunicación confiable y datos precisos en tiempo real. |
| **EP12** | **Procesamiento de Pagos** | Como plataforma, necesito procesar transacciones de forma segura, rápida y confiable cumpliendo con estándares de seguridad financiera. |

## User Stories y Technical Stories

| **Epic / Story ID** | **Título** | **Descripción** | **Criterios de Aceptación** | **Relacionado con (Epic ID)** |
|---------------------|------------|-----------------|----------------------------|-------------------------------|
| **EP01** | **Presencia Digital y Captación** | - | - | - |
| **US01** | Sección hero con propuesta de valor IoT | Como visitante interesado en estacionamientos quiero ver información clara sobre cómo ParkeoYa usa sensores IoT para entender el valor diferencial | **Given** que un visitante accede a la landing page<br>**When** visualiza la sección hero<br>**Then** comprende claramente cómo los sensores detectan ocupación en tiempo real y ve beneficios específicos como "Encuentra espacios libres en tiempo real"<br><br>**Given** que un visitante lee los testimonios<br>**When** revisa casos de éxito<br>**Then** ve métricas específicas de tiempo ahorrado (ej: "Reduje 15 minutos de búsqueda diaria") | **EP01** |
| **US02** | Barra de navegación intuitiva | Como visitante quiero navegar fácilmente entre secciones para encontrar información según mis necesidades | **Given** que un visitante navega en la landing page<br>**When** utiliza la barra de navegación<br>**Then** accede rápidamente a secciones clave como "Cómo funciona", "Para Conductores", "Para Propietarios"<br><br>**Given** que un visitante propietario accede a "Para Propietarios"<br>**When** hace clic en la sección<br>**Then** ve información específica sobre beneficios para su negocio | **EP01** |
| **US03** | Acceso directo a registro desde landing | Como visitante quiero registrarme directamente desde landing para empezar a usar ParkeoYa sin pasos adicionales | **Given** que un visitante selecciona "Soy Conductor"<br>**When** completa el registro básico<br>**Then** es dirigido automáticamente a la aplicación móvil<br><br>**Given** que un visitante selecciona "Soy Propietario"<br>**When** completa el registro comercial<br>**Then** accede al panel web de gestión | **EP01** |
| **EP02** | **Onboarding y Autenticación** | - | - | - |
| **US04** | Registro diferenciado por tipo de usuario | Como usuario nuevo quiero registrarme seleccionando mi rol para acceder a funcionalidades específicas | **Given** que un nuevo usuario selecciona "Conductor"<br>**When** completa datos básicos (nombre, email, teléfono)<br>**Then** accede a funciones de búsqueda de estacionamientos y configuración de vehículo<br><br>**Given** que un nuevo usuario selecciona "Propietario"<br>**When** ingresa datos comerciales (nombre negocio, RUC, dirección)<br>**Then** accede al panel de gestión de estacionamientos<br><br>**Given** que un usuario intenta registrarse con email existente<br>**When** envía el formulario<br>**Then** ve opción de iniciar sesión y enlace de recuperación de contraseña | **EP02** |
| **US05** | Inicio de sesión unificado | Como usuario registrado quiero iniciar sesión y ser dirigido a mi plataforma para acceder rápidamente | **Given** que un conductor registrado inicia sesión<br>**When** ingresa credenciales válidas<br>**Then** ve el mapa con estacionamientos cercanos a su ubicación actual<br><br>**Given** que un propietario registrado inicia sesión<br>**When** accede con credenciales válidas<br>**Then** ve su dashboard con métricas básicas de ocupación e ingresos<br><br>**Given** que un usuario ingresa credenciales incorrectas<br>**When** intenta iniciar sesión<br>**Then** ve mensaje de error específico "Email o contraseña incorrectos" con opción de recuperación | **EP02** |
| **EP03** | **Gestión de Perfiles** | - | - | - |
| **US06** | Perfil de conductor | Como conductor quiero gestionar mis datos básicos para mantener información actualizada | **Given** que un conductor accede a su perfil<br>**When** actualiza datos personales (nombre, teléfono, email)<br>**Then** los cambios se guardan correctamente y ve confirmación "Perfil actualizado"<br><br>**Given** que un conductor registra información de su vehículo (marca, modelo, placa)<br>**When** hace nuevas reservas<br>**Then** la información del vehículo se completa automáticamente | **EP03** |
| **US07** | Perfil de propietario | Como propietario quiero gestionar información de mi negocio para mantener datos actualizados | **Given** que un propietario actualiza información comercial<br>**When** guarda cambios en datos como nombre del negocio, RUC, dirección<br>**Then** los cambios se reflejan inmediatamente en la información de sus estacionamientos<br><br>**Given** que un propietario modifica datos de contacto<br>**When** actualiza teléfono o email de contacto<br>**Then** los conductores ven la información actualizada al reservar | **EP03** |
| **EP04** | **Sistema de Reservas** | - | - | - |
| **US08** | Búsqueda simple de estacionamientos en mapa | Como conductor quiero ver estacionamientos disponibles en mapa para encontrar opciones cercanas | **Given** que un conductor abre el mapa<br>**When** busca estacionamientos por su ubicación actual<br>**Then** ve puntos en el mapa actualizados en tiempo real mostrando disponibilidad (verde=libre, rojo=ocupado)<br><br>**Given** que un conductor selecciona un marcador de estacionamiento<br>**When** toca el punto en el mapa<br>**Then** ve información básica: precio por hora, espacios totales disponibles y distancia<br><br>**Given** que un conductor no tiene GPS activado<br>**When** intenta usar el mapa<br>**Then** puede buscar manualmente ingresando una dirección específica | **EP04** |
| **US09** | Reserva básica con confirmación | Como conductor quiero reservar un espacio específico para garantizar disponibilidad | **Given** que un conductor selecciona un espacio libre confirmado por sensores<br>**When** confirma la reserva y procesa el pago<br>**Then** el espacio se bloquea inmediatamente y recibe código QR único para acceso<br><br>**Given** que un conductor llega al estacionamiento reservado<br>**When** escanea el código QR en el sensor<br>**Then** se activa su tiempo de uso y comienza el cálculo de tarifa<br><br>**Given** que un espacio reservado es ocupado durante el proceso de pago<br>**When** el sistema detecta conflicto<br>**Then** muestra automáticamente 3 espacios alternativos cercanos disponibles | **EP04** |
| **US10** | Historial de reservas | Como conductor quiero ver mis reservas pasadas para revisar mi historial de uso | **Given** que un conductor accede a su historial<br>**When** revisa la lista de reservas pasadas<br>**Then** ve para cada reserva: fecha, lugar, duración real, costo total y estado final<br><br>**Given** que un conductor filtra reservas por estado<br>**When** selecciona filtros como "Completadas", "Canceladas", "En proceso"<br>**Then** ve únicamente las reservas que coinciden con el estado seleccionado | **EP04** |
| **US11** | Mapa con distancias a estacionamientos | Como conductor quiero ver estacionamientos en mapa con distancias para elegir opciones más cercanas a mi ubicación | **Given** que un conductor abre el mapa con ubicación activa<br>**When** se cargan los estacionamientos cercanos<br>**Then** ve cada estacionamiento con distancia en metros (ej: "150m", "300m")<br><br>**Given** que un conductor selecciona un marcador de estacionamiento<br>**When** toca el punto específico<br>**Then** ve detalles completos: nombre, precio por hora, distancia exacta y número de espacios disponibles<br><br>**Given** que un conductor no tiene GPS activado<br>**When** accede al mapa<br>**Then** ve el mapa centrado en su última ubicación conocida con opción de búsqueda manual por dirección | **EP04** |
| **US12** | Mapa en tiempo real con confirmación por sensores | Como conductor quiero visualizar en el mapa solo los espacios disponibles confirmados por sensores en tiempo real para asegurarme de que la plaza realmente está libre antes de reservar | **Given** que un conductor abre el mapa en la aplicación<br>**When** consulta espacios disponibles<br>**Then** el sistema muestra únicamente estacionamientos confirmados como libres por sensores IoT en tiempo real<br><br>**Given** que un espacio reservado se libera físicamente<br>**When** el sensor detecta que el vehículo salió<br>**Then** el espacio vuelve a mostrarse automáticamente como disponible en el mapa dentro de 30 segundos | **EP04** |
| **US13** | Reserva rápida en un solo click | Como conductor quiero reservar un estacionamiento con un solo toque en la app para ahorrar tiempo y evitar pasos intermedios | **Given** que un conductor visualiza un espacio disponible en el mapa<br>**When** presiona el botón "Reservar ahora"<br>**Then** la plaza queda reservada inmediatamente mostrando confirmación con código QR y tiempo límite<br><br>**Given** que un conductor intenta reserva rápida sin método de pago configurado<br>**When** presiona "Reservar ahora"<br>**Then** ve mensaje solicitando configurar método de pago antes de continuar | **EP04** |
| **US14** | Cobro automático por tiempo real | Como conductor quiero que el sistema me cobre automáticamente según el tiempo exacto de uso del estacionamiento para pagar solo lo justo | **Given** que un conductor inicia ocupación de plaza reservada<br>**When** escanea QR y el sensor confirma entrada<br>**Then** inicia conteo de tiempo automático con tarifa por minuto<br><br>**Given** que un conductor libera el espacio<br>**When** el sensor detecta salida del vehículo<br>**Then** el sistema calcula tiempo usado exacto y procesa cobro automático con recibo digital | **EP04** |
| **US15** | Extender tiempo de reserva | Como conductor quiero poder extender el tiempo de mi reserva desde la aplicación para evitar perder la plaza si necesito más tiempo | **Given** que un conductor tiene reserva activa próxima a vencer<br>**When** selecciona "Extender tiempo" y confirma extensión<br>**Then** el sistema amplía la reserva por el tiempo solicitado y actualiza el cálculo de cobro<br><br>**Given** que un conductor intenta extender cuando el estacionamiento está completamente ocupado<br>**When** solicita extensión<br>**Then** ve mensaje "No se puede extender - estacionamiento lleno" con sugerencias de lugares cercanos | **EP04** |
| **US16** | Compensación automática por fallo de espacio | Como conductor quiero recibir una compensación inmediata si el sensor falla o el espacio reservado está ocupado para no perder dinero ni tiempo | **Given** que un conductor llega a su plaza reservada<br>**When** encuentra el espacio ocupado o con sensor defectuoso<br>**Then** el sistema detecta automáticamente el problema y genera compensación (reembolso o espacio alternativo gratuito)<br><br>**Given** que ocurre fallo técnico en el sensor durante uso activo<br>**When** el sistema detecta inconsistencia en lecturas<br>**Then** aplica tarifa mínima y notifica al conductor sobre el ajuste aplicado | **EP04** |
| **US17** | Notificación de nuevos espacios cercanos | Como conductor quiero recibir notificaciones cuando se liberen nuevos estacionamientos cerca de mí para poder reservarlos rápidamente | **Given** que un conductor tiene búsqueda activa de estacionamientos<br>**When** se libera una plaza cercana (radio 500m) confirmada por sensor<br>**Then** recibe notificación push inmediata con opción "Reservar ahora" que permite reserva directa<br><br>**Given** que un conductor tiene notificaciones deshabilitadas<br>**When** se liberan espacios cercanos<br>**Then** ve las actualizaciones solo cuando abre la aplicación activamente | **EP04** |
| **EP05** | **Gestión de Estacionamientos** | - | - | - |
| **US18** | Registro de estacionamiento | Como propietario quiero registrar mi estacionamiento para ofrecerlo en la plataforma | **Given** que un propietario completa datos básicos del estacionamiento (nombre, dirección, descripción)<br>**When** envía la información de registro<br>**Then** el estacionamiento aparece disponible para conductores después de validación automática<br><br>**Given** que un propietario configura precio base y horarios de operación<br>**When** guarda la configuración inicial<br>**Then** las tarifas se aplican automáticamente a todas las nuevas reservas | **EP05** |
| **US19** | Configuración simple de espacios | Como propietario quiero configurar número de espacios para controlar disponibilidad | **Given** que un propietario define 20 espacios totales en su estacionamiento<br>**When** conductores buscan en la zona<br>**Then** ven disponibilidad correcta basada en sensores reales y capacidad configurada<br><br>**Given** que un propietario cambia número total de espacios de 20 a 25<br>**When** actualiza la configuración<br>**Then** el cambio se refleja inmediatamente en búsquedas y disponibilidad mostrada | **EP05** |
| **US20** | Visualizar reservas de mi estacionamiento | Como propietario quiero ver reservas en mi estacionamiento para gestionar ocupación | **Given** que un propietario accede a la vista de reservas<br>**When** revisa la lista de reservas activas y programadas<br>**Then** ve información completa: conductor (nombre/teléfono), hora inicio/fin, duración y estado actual<br><br>**Given** que se procesa nueva reserva en su estacionamiento<br>**When** un conductor confirma reserva<br>**Then** la reserva aparece inmediatamente en la lista del propietario con estado "Confirmada" | **EP05** |
| **EP06** | **Monetización por Comisiones** | - | - | - |
| **US21** | Modelo de comisiones | Como propietario quiero entender comisiones por transacción para calcular mis ingresos | **Given** que se procesa una reserva en el estacionamiento del propietario<br>**When** revisa el desglose de la transacción<br>**Then** ve claramente: tarifa total cobrada al conductor, comisión de plataforma (15%) y su ingreso neto<br><br>**Given** que un propietario acumula múltiples reservas en el mes<br>**When** revisa su reporte mensual<br>**Then** ve total de transacciones, comisiones pagadas acumuladas y proyección de ingresos netos | **EP06** |
| **US22** | Reportes básicos de ingresos por comisiones | Como propietario quiero ver reportes de mis reservas e ingresos para hacer seguimiento básico de mi negocio | **Given** que un propietario accede a reportes financieros<br>**When** selecciona período mensual específico<br>**Then** ve métricas completas: total reservas, ingresos brutos, comisiones pagadas, ingresos netos y tendencias<br><br>**Given** que un propietario descarga reporte detallado<br>**When** selecciona formato Excel y período<br>**Then** obtiene archivo con desglose por día, reserva individual, conductor y cálculos detallados<br><br>**Given** que no hay reservas en el período seleccionado<br>**When** genera reporte<br>**Then** ve mensaje claro "Sin actividad registrada en fechas seleccionadas" con sugerencias para aumentar ocupación | **EP06** |
| **EP07** | **Sistema de Calificaciones** | - | - | - |
| **US23** | Calificación post-uso de estacionamientos | Como conductor quiero calificar estacionamientos usados para compartir mi experiencia con otros usuarios | **Given** que un conductor finaliza exitosamente uso de estacionamiento<br>**When** el sistema solicita calificación post-servicio<br>**Then** puede asignar 1-5 estrellas con comentario opcional sobre limpieza, seguridad y facilidad de acceso<br><br>**Given** que un conductor intenta calificar sin conexión a internet<br>**When** la aplicación no logra sincronizar la reseña<br>**Then** el sistema guarda la calificación localmente y la sincroniza automáticamente al recuperar conexión | **EP07** |
| **US24** | Visualización de reseñas antes de reservar | Como conductor quiero ver reseñas y calificaciones de otros usuarios para tomar decisiones informadas antes de reservar | **Given** que un conductor busca un estacionamiento específico<br>**When** revisa los detalles del espacio antes de reservar<br>**Then** visualiza promedio de calificaciones (1-5 estrellas), número total de reseñas y comentarios más recientes<br><br>**Given** que la información de reseñas no está disponible temporalmente<br>**When** un conductor consulta detalles de estacionamiento<br>**Then** ve mensaje informativo "Reseñas temporalmente no disponibles" sin afectar capacidad de reserva | **EP07** |
| **EP08** | **Notificaciones en Tiempo Real** | - | - | - |
| **US25** | Alertas de vencimiento estándar | Como conductor quiero recibir alertas estándar antes del vencimiento para no olvidar liberar el espacio | **Given** que un conductor tiene reserva activa con tiempo definido<br>**When** faltan 15 minutos para vencimiento<br>**Then** recibe primera alerta push: "Tu reserva vence en 15 minutos"<br><br>**Given** que faltan 5 minutos para vencimiento de reserva<br>**When** no ha liberado el espacio<br>**Then** recibe alerta final: "¡Reserva vence en 5 minutos! Extiende o libera ahora"<br><br>**Given** que ocurre error de conectividad durante envío de alertas<br>**When** no se pueden enviar ambas alertas programadas<br>**Then** el sistema garantiza al menos el envío de la alerta final de vencimiento | **EP08** |
| **US26** | Configuración de alertas progresivas | Como conductor quiero configurar intervalos personalizados de alerta (ej. 30, 10 y 5 min) para gestionar mi tiempo de forma flexible | **Given** que un conductor personaliza intervalos de alerta en configuración<br>**When** establece alertas a 30, 10 y 5 minutos antes del vencimiento<br>**Then** recibe notificaciones push en los intervalos exactos configurados<br><br>**Given** que un conductor configuró alertas personalizadas<br>**When** ocurre error de sincronización con sus preferencias<br>**Then** el sistema aplica configuración por defecto (15 y 5 minutos) y notifica sobre el cambio temporal | **EP08** |
| **US27** | Soporte básico a usuarios | Como administrador quiero comunicarme con usuarios que tienen problemas para resolver incidencias rápidamente | **Given** que un usuario reporta problema específico<br>**When** el administrador necesita información adicional<br>**Then** puede enviar mensaje directo al usuario vía email desde el panel con plantillas predefinidas<br><br>**Given** que un administrador resuelve problema reportado<br>**When** cierra el caso en el sistema<br>**Then** el usuario recibe notificación automática con resumen de solución aplicada y número de caso para referencia<br><br>**Given** que un caso requiere seguimiento posterior<br>**When** el administrador marca para seguimiento<br>**Then** puede programar recordatorio automático para verificar satisfacción del usuario en 24-48 horas | **EP08** |
| **EP09** | **Backend API y Microservicios** | - | - | - |
| **TS01** | API de autenticación básica | Como developer quiero endpoints de login/registro para autenticar usuarios | **Given** que el endpoint POST /api/v1/auth/login existe<br>**When** envío credenciales válidas (email, password)<br>**Then** recibo respuesta 200 con token JWT válido, refresh token y datos básicos del usuario<br><br>**Given** que tengo token JWT válido<br>**When** accedo a endpoints protegidos con header Authorization<br>**Then** obtengo datos correctos y respuesta exitosa<br><br>**Given** que envío credenciales inválidas al endpoint de login<br>**When** hago request de autenticación<br>**Then** recibo error 401 con mensaje específico "Credenciales incorrectas" | **EP09** |
| **TS02** | API CRUD de estacionamientos | Como developer quiero gestionar estacionamientos vía API para operaciones básicas | **Given** que hago GET request a /api/v1/parkings con autenticación válida<br>**When** la request se procesa<br>**Then** recibo lista paginada de estacionamientos con metadata (total, página, límite)<br><br>**Given** que creo nuevo estacionamiento con POST /api/v1/parkings<br>**When** envío datos válidos (nombre, dirección, espacios_totales, precio_hora)<br>**Then** recibo respuesta 201 con recurso creado incluyendo ID único asignado<br><br>**Given** que envío datos incompletos en POST de estacionamiento<br>**When** faltan campos requeridos<br>**Then** recibo error 400 con lista específica de campos faltantes y formatos esperados | **EP09** |
| **TS03** | API básica de reservas | Como developer quiero gestionar reservas vía API para procesar transacciones | **Given** que creo reserva con POST /api/v1/reservations<br>**When** el espacio está disponible y datos son válidos<br>**Then** recibo respuesta 201 con confirmación, código QR único y detalles completos de reserva<br><br>**Given** que consulto reservas por usuario con GET /api/v1/users/{id}/reservations<br>**When** aplico filtro por estado (activa, completada, cancelada)<br>**Then** recibo lista filtrada correctamente con paginación<br><br>**Given** que intento reservar espacio ya ocupado<br>**When** envío request de nueva reserva<br>**Then** recibo error 409 "Espacio no disponible" con lista de 3 espacios alternativos cercanos | **EP09** |
| **US28** | Dashboard administrativo básico | Como administrador quiero un panel de control simple para monitorear actividad general de la plataforma | **Given** que un administrador accede al panel de control<br>**When** inicia sesión con credenciales administrativas<br>**Then** ve métricas en tiempo real: usuarios activos hoy, reservas completadas, ingresos generados y alertas pendientes<br><br>**Given** que existen alertas críticas en el sistema<br>**When** el administrador revisa dashboard<br>**Then** ve notificaciones destacadas en rojo que requieren atención inmediata con opciones de acción directa<br><br>**Given** que todos los sistemas funcionan normalmente<br>**When** se cargan las métricas del dashboard<br>**Then** todos los indicadores aparecen en verde con valores actualizados en tiempo real | **EP09** |
| **US29** | Gestión básica de incidencias | Como administrador quiero ver y resolver reportes de usuarios para dar soporte cuando hay problemas | **Given** que un conductor reporta problema con su reserva<br>**When** el administrador revisa la incidencia<br>**Then** ve información completa: datos del usuario, estacionamiento afectado, fecha/hora, descripción detallada del problema<br><br>**Given** que un administrador confirma problema válido después de investigación<br>**When** aplica solución (reembolso, ajuste de estado, compensación)<br>**Then** puede procesar la solución directamente desde el panel con comentario de resolución para auditoría<br><br>**Given** que un reporte no corresponde a problema real del sistema<br>**When** el administrador evalúa el caso<br>**Then** puede marcarlo como "cerrado - no procede" con justificación detallada para histórico | **EP09** |
| **EP10** | **Frontend Multiplataforma** | - | - | - |
| **US30** | App móvil básica para conductores | Como conductor quiero app móvil simple para buscar y reservar estacionamientos | **Given** que un conductor abre la aplicación móvil<br>**When** la app carga completamente<br>**Then** ve mapa centrado en su ubicación actual con estacionamientos cercanos marcados claramente<br><br>**Given** que un conductor quiere hacer reserva<br>**When** selecciona espacio y confirma reserva<br>**Then** el proceso se completa en máximo 4 taps: seleccionar→confirmar→pagar→recibir QR<br><br>**Given** que no hay conexión a internet activa<br>**When** el conductor abre la app<br>**Then** ve sus reservas activas guardadas localmente con opción de sincronizar al recuperar conexión | **EP10** |
| **US31** | Panel web para propietarios | Como propietario quiero panel web simple para gestionar mi estacionamiento | **Given** que un propietario accede al panel web<br>**When** inicia sesión correctamente<br>**Then** ve dashboard con ocupación actual en tiempo real, reservas del día y métricas básicas de ingresos<br><br>**Given** que un propietario actualiza precios de su estacionamiento<br>**When** guarda los cambios de tarifa<br>**Then** los nuevos precios se aplican inmediatamente a todas las búsquedas y reservas futuras<br><br>**Given** que ocurre error de conexión durante uso del panel<br>**When** se pierde conectividad<br>**Then** ve mensaje claro de error con botón "Reintentar" y datos locales preservados | **EP10** |
| **EP11** | **Infraestructura IoT** | - | - | - |
| **TS04** | Detección básica de ocupación | Como dispositivo IoT quiero detectar ocupación simple para reportar estado básico | **Given** que un vehículo entra al espacio monitoreado<br>**When** el sensor detecta presencia confirmada por 10 segundos<br>**Then** cambia estado a "ocupado", enciende LED rojo y reporta al sistema central<br><br>**Given** que un vehículo abandona el espacio<br>**When** el sensor confirma ausencia por 30 segundos consecutivos<br>**Then** cambia estado a "libre", enciende LED verde y actualiza disponibilidad<br><br>**Given** que hay señal ambigua o interferencia en el sensor<br>**When** las lecturas son inconsistentes<br>**Then** mantiene último estado válido por 60 segundos y reporta alerta de calibración | **EP11** |
| **TS05** | Sincronización Edge-Cloud básica | Como edge server local quiero enviar datos de sensores al API cloud para mantener información actualizada en la plataforma | **Given** que sensores IoT reportan cambio de estado al edge server<br>**When** el edge server procesa los datos localmente<br>**Then** envía actualización al API cloud vía HTTPS cada 30 segundos con batch de cambios<br><br>**Given** que la conexión a internet falla temporalmente<br>**When** el edge server detecta desconexión<br>**Then** almacena eventos localmente en cola FIFO hasta recuperar conexión y procesa backlog<br><br>**Given** que el API cloud confirma recepción exitosa<br>**When** edge server recibe acknowledgment HTTP 200<br>**Then** marca eventos como sincronizados y los elimina de cola local | **EP11** |
| **EP12** | **Procesamiento de Pagos** | - | - | - |
| **US32** | Pago con tarjeta | Como conductor quiero pagar reservas con tarjeta para completar transacciones de forma segura | **Given** que un conductor selecciona método de pago con tarjeta válida registrada<br>**When** confirma pago de reserva<br>**Then** se procesa transacción exitosamente y recibe confirmación con número de transacción<br><br>**Given** que la tarjeta del conductor es rechazada por el banco<br>**When** intenta procesar pago<br>**Then** ve mensaje específico del error ("Fondos insuficientes", "Tarjeta vencida") con opción de método alternativo<br><br>**Given** que ocurre error temporal en procesador de pagos<br>**When** falla el primer intento de cobro<br>**Then** el sistema reintenta automáticamente una vez después de 30 segundos | **EP12** |



### 3.3. Impact Mapping

![Impact Mapping](assets/chapter-3/impact-mapping.jpg)

# Product Backlog

| # Orden | User Story Id | Título | Descripción | Story Points (1 / 2 / 3 / 5 / 8) |
|---------|---------------|--------|-------------|----------------------------------|
| 1 | US04 | Registro diferenciado por tipo de usuario | Como usuario nuevo quiero registrarme seleccionando mi rol para acceder a funcionalidades específicas | 5 |
| 2 | US05 | Inicio de sesión unificado | Como usuario registrado quiero iniciar sesión y ser dirigido a mi plataforma para acceder rápidamente | 3 |
| 3 | TS01 | API de autenticación básica | Endpoints de login/registro para autenticar usuarios (JWT, refresh token) | 5 |
| 4 | US01 | Sección hero con propuesta de valor IoT | Landing: comunicar claramente el valor de sensores IoT y beneficios | 2 |
| 5 | US02 | Barra de navegación intuitiva | Navegación fácil entre secciones para encontrar información | 2 |
| 6 | US03 | Acceso directo a registro desde landing | Registro desde la landing (Conductor / Propietario) | 3 |
| 7 | US06 | Perfil de conductor | Gestión de datos personales y vehículo para conductores | 3 |
| 8 | US07 | Perfil de propietario | Gestión de información comercial y contacto para propietarios | 3 |
| 9 | TS02 | API CRUD de estacionamientos | Endpoints para crear/leer/actualizar/eliminar estacionamientos | 5 |
| 10 | US08 | Búsqueda simple de estacionamientos en mapa | Ver estacionamientos disponibles en mapa con estado básico | 5 |
| 11 | US09 | Reserva básica con confirmación | Reservar espacio, pago y recibir código QR | 5 |
| 12 | TS03 | API básica de reservas | Endpoints para crear/consultar reservas y devolución de QR | 5 |
| 13 | US10 | Historial de reservas | Ver reservas pasadas con detalles y filtros | 3 |
| 14 | US11 | Mapa con distancias a estacionamientos | Mostrar distancia en metros y detalles en el mapa | 3 |
| 15 | US12 | Mapa en tiempo real con confirmación por sensores | Mostrar sólo espacios confirmados libres por sensores IoT | 5 |
| 16 | US13 | Reserva rápida en un solo click | Reservas rápidas con mínima fricción y validaciones | 3 |
| 17 | US14 | Cobro automático por tiempo real | Cobro por tiempo real según sensores/QR al iniciar/terminar uso | 5 |
| 18 | US15 | Extender tiempo de reserva | Extender reserva desde la app si hay disponibilidad | 3 |
| 19 | US16 | Compensación automática por fallo de espacio | Reembolso/compensación si el espacio reservado no está disponible | 5 |
| 20 | US17 | Notificación de nuevos espacios cercanos | Notificaciones push cuando se liberan plazas cercanas | 3 |
| 21 | US18 | Registro de estacionamiento | Propietario registra su estacionamiento en la plataforma | 5 |
| 22 | US19 | Configuración simple de espacios | Definir número de espacios, horarios y tarifas | 3 |
| 23 | US20 | Visualizar reservas de mi estacionamiento | Propietario ve reservas activas y programadas con detalles | 3 |
| 24 | US21 | Modelo de comisiones | Desglose de comisiones por transacción para propietarios | 2 |
| 25 | US22 | Reportes básicos de ingresos por comisiones | Reportes mensuales y descargas (Excel) de ingresos y comisiones | 5 |
| 26 | US23 | Calificación post-uso de estacionamientos | Calificar y comentar tras uso; sincronización offline | 2 |
| 27 | US24 | Visualización de reseñas antes de reservar | Mostrar promedio de calificaciones y comentarios recientes | 3 |
| 28 | US25 | Alertas de vencimiento estándar | Notificaciones antes del fin de la reserva (15/5 min) | 3 |
| 29 | US26 | Configuración de alertas progresivas | Permitir intervalos personalizados de alertas al usuario | 3 |
| 30 | US27 | Soporte básico a usuarios | Herramientas para que admins respondan reportes y cierren casos | 3 |
| 31 | US28 | Dashboard administrativo básico | Panel con métricas en tiempo real para administradores | 5 |
| 32 | US29 | Gestión básica de incidencias | Ver y resolver reportes de usuarios desde admin panel | 3 |
| 33 | US30 | App móvil básica para conductores | App móvil para buscar, reservar y gestionar reservas (UX móvil) | 8 |
| 34 | US31 | Panel web para propietarios | Panel web para gestión completa de estacionamientos y métricas | 5 |
| 35 | TS04 | Detección básica de ocupación | Lógica/firmware del sensor para detectar entrada/salida y reportar | 5 |
| 36 | TS05 | Sincronización Edge-Cloud básica | Edge server envia batches de eventos al cloud y maneja desconexiones | 5 |
| 37 | US32 | Pago con tarjeta | Procesar pagos con tarjeta y gestionar errores/reintentos | 5 |
